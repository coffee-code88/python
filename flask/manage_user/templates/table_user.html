{% block body %}
<h2>USER LIST</h2>
        <table class="table table-hover">
            <thead>
                <th>User Name</th>
                <th>Password</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Tools</th>
            </thead>
            <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user.user_name }}</td>
                    <td>{{ user.password }}</td>
                    <td>{{ user.first_name }}</td>
                    <td>{{ user.last_name }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        <a class="btn btn-info btn-sm edit_user" user_id="{{ user.user_id }}">
                            <span class="glyphicon glyphicon-pencil"></span>EDIT
                        </a>                        
                        <a class="btn btn-info btn-sm delete_user" user_id="{{ user.user_id }}">
                            <span class="glyphicon glyphicon-remove"></span>DELETE
                        </a>                        
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
<script>
    $(document).ready(function(){
        $(".edit_user").click(function(e){
            console.log("get user by id to edit");
            e.preventDefault();
        });

        $(".delete_user").click(function(e){ 
            console.log("delete user by id");
            e.preventDefault();
            item=$(this)
            $.ajax({
                dataType:"json",
                data: { user_id: item.attr("user_id") },
                type: "GET",
                url: "/user/delete",
                success: function(response){
                    console.log("sucessfully delete");
                    $("#result").removeClass().show().attr("class", "alert alert-success").html(response.result).fadeOut(5000);
                    console.log(item.parents('tr'))
                    item.parents('tr').addClass("danger").fadeOut(2000, function(){$(this).remove()});
                } 
            });
        });
   });
</script>
{% endblock %}
